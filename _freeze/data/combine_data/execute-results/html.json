{
  "hash": "04c4b7e7248210943b83d05aafb93349",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Combine data\"\ntitle-block-banner: true\nexecute:\n  message: false\n  warning: false\n---\n\n::: {.cell}\n\n:::\n\n\n\n\n\n## A single data frame\n\nAfter having cleaned all individual studies and put the data into a shared format, we combine the studies into a single data frame. \n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# combine data\n\n# List all matching files recursively\nfiles <- list.files(\n  path = \"papers\", \n  pattern = \"^cleaned.*\\\\.rds$\", \n  full.names = TRUE, \n  recursive = TRUE\n)\n\n# Load each file into a named list\nstudies_data <- lapply(files, function(file) {\n  readRDS(file) |> \n    # ensure all identifier variables are of same variable type\n    mutate(subject_id = as.character(subject_id), \n           scale = as.character(scale))\n})\n\n# Name list elements based on filenames (without extension or path)\nnames(studies_data) <- tools::file_path_sans_ext(basename(files))\n\ndata <- bind_rows(studies_data)\n\n# build additional variables\nwrite_csv(data, \"data.csv\")\n```\n:::\n\n\n\n\n\n\n## Control and intervention group selection\n\nSeveral experiments have multiple control and/or intervention groups. For our meta-analysis, for each experiment, we only pair one control and one treatment group. In a case where we needed to make a selection, we have coded our selection choice in the variables `intervention_selection` and  `control_selection`. \n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnames(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"paper_id\"                              \n [2] \"experiment_id\"                         \n [3] \"subject_id\"                            \n [4] \"news_id\"                               \n [5] \"country\"                               \n [6] \"veracity\"                              \n [7] \"condition\"                             \n [8] \"intervention_label\"                    \n [9] \"intervention_description\"              \n[10] \"intervention_selection\"                \n[11] \"intervention_selection_description\"    \n[12] \"accuracy_raw\"                          \n[13] \"scale\"                                 \n[14] \"originally_identified_treatment_effect\"\n[15] \"partisan_identity\"                     \n[16] \"age\"                                   \n[17] \"concordance\"                           \n[18] \"news_slant\"                            \n[19] \"accuracy\"                              \n[20] \"control_selection\"                     \n[21] \"age_range\"                             \n[22] \"id\"                                    \n[23] \"year\"                                  \n[24] \"control_selection_description\"         \n```\n\n\n:::\n\n```{.r .cell-code}\n# data |> \n#   filter(\n#     # for cases where there was an intervention selection, make sure to only pick the selected intervention\n#     is.na(intervention_selection) | intervention_label == intervention_selection,\n#     # same but for the control\n#     is.na(control_selection) | control_label == control_selection\n#   )\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}